(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{23:function(e,t,n){},43:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n(1),u=n.n(c),a=n(17),i=n.n(a),o=(n(23),n(4)),s=n.n(o),l=n(6),f=n(8),d=n(3);function b(e){var t=e.filterText,n=e.setFilterText;return Object(r.jsxs)("div",{children:["filter shown with:",Object(r.jsx)("input",{type:"text",value:t,onChange:function(e){return n(e.target.value.trim())}})]})}function j(e){var t=e.handleSubmit,n=e.newName,c=e.newNumber,u=e.setNewName,a=e.setNewNumber;return Object(r.jsxs)("form",{onSubmit:t,children:[Object(r.jsxs)("div",{children:["name:"," ",Object(r.jsx)("input",{value:n,onChange:function(e){return u(e.target.value)}}),Object(r.jsxs)("div",{children:["number:"," ",Object(r.jsx)("input",{value:c,onChange:function(e){return a(e.target.value)}})]})]}),Object(r.jsx)("div",{children:Object(r.jsx)("button",{type:"submit",children:"add"})})]})}function h(e){var t=e.person,n=e.handleClick;return Object(r.jsxs)("div",{children:[" ",t.name," ",t.number," ",Object(r.jsx)("button",{onClick:function(){return n(t)},children:"delete"})]})}function m(e){var t=e.filterText,n=e.persons,c=e.handleClick;return Object(r.jsx)("div",{children:t.trim().length?n.filter((function(e){return e.name.match(new RegExp(t,"i"))})).map((function(e){return Object(r.jsx)(h,{handleClick:c,person:e},e.name)})):n.map((function(e){return Object(r.jsx)(h,{handleClick:c,person:e},e.name)}))})}function p(e){var t=e.message;return null===t?null:Object(r.jsx)("div",{className:"notification ".concat(t.type),children:t.content})}var x=n(5),O=n.n(x),v="/api/persons",w=function(){return O.a.get(v).then((function(e){return e.data}))},k=function(e){return O.a.post(v,e).then((function(e){return e.data}))},g=function(e,t){return O.a.put("".concat(v,"/").concat(e),t).then((function(e){return e.data}))},N=function(e){return O.a.delete("".concat(v,"/").concat(e)).then((function(e){return e.data}))},T=function(){var e=Object(c.useState)([]),t=Object(d.a)(e,2),n=t[0],u=t[1],a=Object(c.useState)(""),i=Object(d.a)(a,2),o=i[0],h=i[1],x=Object(c.useState)(""),O=Object(d.a)(x,2),v=O[0],T=O[1],y=Object(c.useState)(""),C=Object(d.a)(y,2),S=C[0],F=C[1],D=Object(c.useState)(null),E=Object(d.a)(D,2),P=E[0],B=E[1];Object(c.useEffect)((function(){return w().then((function(e){u(e)})),function(){}}),[]);var I=function(){var e=Object(f.a)(s.a.mark((function e(t){var r,c,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),r=n.find((function(e){return e.name===o})),c=function(){h(""),T("")},!r){e.next=14;break}if(window.confirm("".concat(o," is already added to phonebook, replace the old number with a new one?"))){e.next=8;break}return e.abrupt("return",null);case 8:return delete(a=Object(l.a)({},r)).id,e.next=12,g(r.id,Object(l.a)(Object(l.a)({},a),{},{number:v})).then((function(e){u(n.map((function(t){return t.name!==o?t:e}))),c(),B({content:"Updated ".concat(e.name),type:"info"}),setTimeout((function(){B(null)}),5e3)})).catch((function(e){B({content:e.response.data.error,type:"error"}),setTimeout((function(){B(null)}),5e3)}));case 12:e.next=16;break;case 14:return e.next=16,k({name:o,number:v}).then((function(e){u(n.concat([e])),c(),B({content:"Added ".concat(e.name),type:"info"}),setTimeout((function(){B(null)}),5e3)})).catch((function(e){B({content:e.response.data.error,type:"error"}),setTimeout((function(){B(null)}),5e3)}));case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),J=function(){var e=Object(f.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(window.confirm("Delete ".concat(t.name," ?"))){e.next=2;break}return e.abrupt("return",null);case 2:return e.next=4,N(t.id).then((function(e){B({content:"Deleted ".concat(t.name),type:"info"}),setTimeout((function(){B(null)}),5e3),u(n.filter((function(e){return e.id!==t.id})))})).catch((function(e){B({content:"the person '".concat(t.name,"' does not exist!"),type:"error"}),setTimeout((function(){B(null)}),5e3),u(n.filter((function(e){return e.id!==t.id})))}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(r.jsxs)("div",{children:[Object(r.jsx)("h2",{children:"Phonebook"}),Object(r.jsx)(p,{message:P}),Object(r.jsx)(b,{filterText:S,setFilterText:F}),Object(r.jsx)("h2",{children:"add a new"}),Object(r.jsx)(j,{handleSubmit:I,newName:o,setNewName:h,newNumber:v,setNewNumber:T}),Object(r.jsx)("h2",{children:"Numbers"}),Object(r.jsx)(m,{handleClick:J,filterText:S,persons:n})]})},y=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,44)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,u=t.getLCP,a=t.getTTFB;n(e),r(e),c(e),u(e),a(e)}))};i.a.render(Object(r.jsx)(u.a.StrictMode,{children:Object(r.jsx)(T,{})}),document.getElementById("root")),y()}},[[43,1,2]]]);
//# sourceMappingURL=main.4a9a5525.chunk.js.map